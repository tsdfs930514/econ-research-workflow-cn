---
description: "预分析识别策略挑战者，含威胁评估"
user_invocable: true
---

# /devils-advocate — 识别策略挑战者

对识别策略和研究设计进行系统性的预分析挑战。本技能生成的是**威胁评估**，而非代码修复。它是概念性的，应在分析设计之前或设计过程中运行。

**适用范围区分**：`/devils-advocate` 是**预分析**的概念性挑战（威胁、替代解释、证伪检验）。`econometrics-critic` 是**分析后**的代码审查（诊断检验、实现、报告）。

## 激活

当用户运行 `/devils-advocate` 时，从以下来源读取当前研究设计：
1. `vN/docs/research_proposal.md`（如果由 `/interview-me` 生成），或
2. 请用户描述：研究问题、识别策略、核心变量和方法。

---

## 评估结构

### 1. 通用威胁

针对具体研究设计评估每项威胁。并非所有威胁都适用——跳过明显不相关的。

| 威胁 | 需要回答的问题 |
|------|---------------|
| **遗漏变量偏误** | 哪些不可观测因素与处理变量和结果变量同时相关？ |
| **逆向因果** | 是否可能是 Y 导致了 X 而非 X 导致 Y？ |
| **测量误差** | 处理变量/结果变量的度量是否存在误差？属于哪种类型（经典型、非经典型）？ |
| **选择偏误** | 处理组在不可观测维度上是否与控制组存在系统性差异？ |
| **SUTVA 违反** | 对一个单位的处理是否可能溢出影响其他单位？ |
| **函数形式** | 线性设定是否合适，还是效应可能是非线性的？ |
| **外部有效性** | 估计的效应是否可以推广到特定样本之外？ |
| **发表偏误 / p-hacking** | 是否测试了多个规范并只报告最优结果？ |

### 2. 方法特定威胁

根据识别出的方法进行评估：

**DID / TWFE / 交错 DID**：
- 平行趋势：有什么处理前的证据？如果趋势发散怎么办？
- 预期效应：处理前单位是否可能改变行为？
- 负权重：在交错处理下，某些 ATT 是否以错误符号进入（de Chaisemartin & D'Haultfoeuille）？
- 处理效应异质性：处理效应是否在不同群组或时间上有所变化？
- 样本组成变化：样本是否随时间变化（进入/退出）？

**IV / 2SLS**：
- 排除性约束：工具变量通过哪些渠道可能直接影响 Y？
- 单调性：工具变量是否可能对部分单位产生相反方向的影响？
- LATE vs ATE：局部平均处理效应是否具有政策相关性？
- 弱工具变量：预期第一阶段 F 值是多少？是否处于临界水平？
- 过多工具变量：如果使用多个工具变量，是否存在过度识别问题？

**RDD**：
- 操纵：个体是否能精确操控位于断点附近？（McCrary 密度检验）
- 带宽敏感性：结果随带宽变化的幅度有多大？
- 安慰剂断点：在非处理断点处是否存在效应？
- 协变量平衡：协变量在断点处是否平滑？
- Donut hole：断点处是否存在聚集，需要 donut-hole 设计？

**面板 FE**：
- 时变混淆因素：哪些不可观测冲击与处理同时发生？
- Nickell 偏误：在 T 较短且含滞后因变量时，动态面板偏误是否值得关注？
- 聚类：聚类层级是否合适？聚类数是否过少？
- 序列相关：面板内误差项是否存在自相关？

**SDID / 合成控制**：
- 供体质量：合成控制是否真正拟合了处理前的处理单位？
- 权重集中度：权重是分散在供体间还是集中在少数几个？
- 内插 vs 外推：合成控制是在供体池内进行内插还是外推？
- 安慰剂单位：空间安慰剂检验是否显示处理单位是异常的？
- 处理单位数量：N 是否太小以致无法进行推断？

### 3. 替代解释

对用户预期的每个核心结果，生成**3 个替代解释**——这些解释可以在不依赖所提出因果机制的情况下产生相同的经验模式：

```
预期结果：X 对 Y 有正向效应

替代解释 1：[描述——如共同冲击、混淆性政策]
替代解释 2：[描述——如逆向因果渠道]
替代解释 3：[描述——如选择/幸存者偏误]
```

对每个替代解释，说明如何将其与所提出的解释**区分**开来（不同的可检验预测、数据模式、时间节点）。

### 4. 证伪检验

推荐具体的证伪检验：

| 检验类型 | 说明 | 检验目的 |
|---------|------|---------|
| **安慰剂处理** | 在虚假时间/事件上施加"处理" | 效应是否仅限于真实处理 |
| **安慰剂结果** | 使用不应受影响的结果变量 | 是否有更广泛的因素驱动结果 |
| **安慰剂断点**（RDD） | 在非处理断点值处检验 | 不连续性是否仅存在于真实断点 |
| **子样本分析** | 在效应应更强/更弱的子组上运行 | 异质性是否符合理论预期 |
| **剂量-反应** | 检验更大的处理强度是否产生更大的效应 | 机制是否为所提出的 |
| **界限分析** | Oster (2019) 或 Altonji 等人的 OVB 界限 | 遗漏变量偏误需要多大才能解释掉结果 |
| **平行趋势检验**（DID） | 含处理前系数的事件研究 | 处理前趋势是否平行 |
| **置换/随机化推断** | 随机重分配处理并比较 | 观察到的效应在零假设下是否异常 |

### 5. 威胁矩阵

将所有发现汇总为威胁矩阵。严重级别与 `econometrics-critic` 一致以保持统一：

| # | 威胁 | 严重性 | 可否缓解？ | 建议操作 |
|---|------|--------|-----------|---------|
| 1 | ... | 严重 | 是/否/部分 | ... |
| 2 | ... | 高 | ... | ... |
| 3 | ... | 中等 | ... | ... |
| ... | ... | 低 | ... | ... |

**严重性等级**：
- **严重 (Critical)**：威胁识别策略有效性——分析前必须解决
- **高 (High)**：严重削弱因果主张——应通过稳健性检验或设计变更解决
- **中等 (Medium)**：非最优但非致命——作为局限性注明或进行辅助检验
- **低 (Low)**：改进建议——在可行的情况下处理

---

## 输出

在对话中展示完整的威胁评估。如果 `vN/docs/research_proposal.md` 存在，建议用核心发现更新其"威胁"部分。

评估完成后显示：
```
威胁评估完成。

严重：N  |  高：N  |  中等：N  |  低：N

建议下一步：
  在运行主估计之前解决严重/高等级威胁。
  /interview-me     — 如需修改研究设计
  /run-{method}     — 继续估计（解决威胁后）
  /robustness       — 针对已识别威胁设计稳健性检验
```

## 注意事项

- 要真正保持对抗性——目的是发现弱点，而非验证设计。
- 好的研究设计经得起这种挑战。差的研究设计会因此得到改进。
- 本技能不生成或修改代码文件。
- 如果用户的设计没有严重威胁，直接说明——不要无中生有。
